parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"A2T1":[function(require,module,exports) {
function e(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}var o=io(),t=Matter.Engine,n=Matter.Render,i=Matter.Runner,r=Matter.Body,a=Matter.Query,s=Matter.Events,d=Matter.Composite,c=Matter.Composites,l=Matter.Constraint,u=Matter.MouseConstraint,y=Matter.Mouse,b=Matter.World,p=Matter.Vector,m=Matter.Bounds,h=Matter.Bodies,v=t.create(),x=v.world,f="JQaZmv15",g=n.create({element:document.body,engine:v,options:{width:window.innerWidth,height:window.innerHeight,showAngleIndicator:!1,showCollisions:!1,showVelocity:!1,wireframes:!1,angles:!1,background:"#E2ECF5"}});n.run(g);var w=i.create();i.run(w,v),x.gravity.y=0;var M=0,C=0,E=r.nextGroup(!0),F=r.nextGroup(!0),k=new head({position:{x:349,y:410},xScale:.57,yScale:.58}).create(),A=new hair({position:{x:350,y:320}}),B=A.create();A.createConstraint(B);var S=new eyes({position:{x:327,y:400},eyeradius:8,pupilradius:4.5,eyecolor:"#F4F3EE",pupilcolor:"#1F2E37"}),V=S.create(),D=function(e){var o=new recthair,t=new hat,n=new text;if(n.remove(B),t.remove(B),o.remove(B),0!=e)for(var i=0;i<=e-1;i++)A.addChain(B);o.create(B),t.create(B),n.create(B),I(M)};function I(e){var o=new text;isNaN(e)?o.setContect(B.bodies[B.bodies.length-1],e):o.setContect(B.bodies[B.bodies.length-1],Number(e).toFixed(3))}function _(e){e<0?M=0:I(M=e)}var L=c.stack(0,0,1,1,10,10,function(){});function N(){var t=h.rectangle(B.bodies[B.bodies.length-1].position.x,B.bodies[B.bodies.length-1].position.y,35,35,{collisionFilter:e({group:E},"group",F),label:"pointinc",render:{fillStyle:"#E2ECF5",text:{content:"+1",color:"#96CE73",size:24,family:"Comfortaa"}},frictionAir:.3});r.applyForce(t,{x:t.position.x,y:t.position.y},{x:0,y:-.05}),L.bodies.length&&d.clear(L),d.add(L,t),_(M+.001),o.emit("clickInc")}function T(){var t=h.rectangle(B.bodies[B.bodies.length-1].position.x,B.bodies[B.bodies.length-1].position.y,35,35,{collisionFilter:e({group:E},"group",F),label:"pointinc",render:{fillStyle:"#E2ECF5",text:{content:"-3",color:"#CE7373",size:24,family:"Comfortaa"}},frictionAir:.3});r.applyForce(t,{x:t.position.x,y:t.position.y},{x:0,y:-.05}),L.bodies.length&&d.clear(L),d.add(L,t),M<=0||(_(M-.003),M<0&&(M=0),o.emit("clickDec"))}function z(){M<=20||(A.removeChain(B),I(M))}b.add(x,L);var G=function(){var e=new recthair,o=new hat,t=new text;t.remove(B),o.remove(B),e.remove(B),A.addChain(B),e.create(B),o.create(B),t.create(B),I(M)};function Q(e){C=e,document.querySelector(".users-online").textContent="Онлайн: ".concat(C)}function R(){var e={x:0,y:B.bodies[B.bodies.length-1].bounds.max.y-200};g.bounds.max.y+e.y>x.bounds.max.y&&(e.y=x.bounds.max.y-g.bounds.max.y),m.translate(g.bounds,e)}setInterval(function(){L.bodies.length&&d.remove(L,L.bodies[0]);var e=B.bodies.length-3,o=M/20;e<(o=Math.floor(o))?(G(),e=o):e>o&&(z(),e=o)},1e3),(new recthair).create(B),(new hat).create(B),(new text).create(B),b.add(x,[k,B,V]),o.on("connection",function(e){o.emit("frontVer",f),_(e);var t=e/20;t=Math.floor(t)-1,D(t),R()}),o.on("frontVer",f),o.on("clickInc",_),o.on("clickDec",_),o.on("autoDec",_),o.on("updateUserCount",Q);var W=y.create(g.canvas),j=u.create(v,{mouse:W,constraint:{stiffness:.001,render:{visible:!1}}}),q={x:0,y:0};s.on(j,"mousemove",function(e){q.x=e.mouse.position.x,q.y=e.mouse.position.y,S.cursorLook(V.bodies[2],V.bodies[3],q)});var H=!1;s.on(j,"enddrag",function(e){var o=d.allBodies(v.world),t=a.point(o,e.mouse.position);if("glad"!=e.body.label&&"pointinc"!=e.body.label&&0==t.length){H=!0,setTimeout(function(){H=!1},500);var n=new Audio;n.src="sounds/tap.mp3",n.play(),T()}}),document.addEventListener("click",function(){var e=d.allBodies(v.world),o=a.point(e,j.mouse.position),t=!0;o.forEach(function(e){if("glad"!=e.label&&"pointinc"!=e.label&&t){var o=B.bodies[B.bodies.length-4];H=!0,setTimeout(function(){H=!1},500);var n=new Audio;n.src="sounds/tap.mp3",n.play();var i=Z(-.05,.05);r.setAngularVelocity(o,i),r.applyForce(o,o.position,{x:i,y:0}),N(),t=!1}})}),b.add(x,j),g.mouse=W,n.lookAt(g,{min:{x:0,y:0},max:{x:700,y:600}});var J={x:.5*g.options.width,y:.5*g.options.height};x.bounds.min.y=-300,x.bounds.max.y=600;var O=1,P={x:1,y:1},U=0;function Z(e,o){return Math.random()*(o-e)+e}function K(e,o){return Math.floor(Math.random()*(o-e+1))+e}document.addEventListener("visibilitychange",function(){document.hidden?bgMusicplay.pause():document.hidden||0==toggle||bgMusicplay.play()},!0),s.on(v,"beforeTick",function(){var e,o=v.world,t=-.1*j.mouse.wheelDelta;0!==t&&(t<0&&P.x>=.6||t>0&&P.x<=1.4)&&(O+=t),Math.abs(P.x-O)>.01&&(t=.2*(O-P.y),P.y+=t,e={x:0,y:g.options.height*t*.5},g.bounds.max.y+e.y>o.bounds.max.y&&(e.y=o.bounds.max.y-g.bounds.max.y),m.translate(g.bounds,e)),M<=0&&1!=H?(k.render.sprite.texture="img/head0_ny.png",U=1,k.position.y=426,B.bodies[2].render.visible=!1,B.bodies[1].render.visible=!1,B.bodies[0].render.visible=!1):M>=0&&1!=H&&(k.render.sprite.texture="img/head_ny.png",U=2,k.position.y=442,B.bodies[2].render.visible=!0,B.bodies[1].render.visible=!0,B.bodies[0].render.visible=!0),1==U&&1==H?(k.position.y=424,k.render.sprite.texture="img/head0A_ny.png"):2==U&&1==H&&(k.position.y=440,k.render.sprite.texture="img/headA_ny.png"),M<=0&&I("У вас 0")});
},{}]},{},["A2T1"], null)
//# sourceMappingURL=/app.aed56e7f.js.map